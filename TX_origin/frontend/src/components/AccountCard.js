import React, {useState} from 'react'
import { Button, Card, Image, Input } from 'semantic-ui-react'

const AccountCard = ({imgsrc, index, to, balance, isEOA, sendfunc, from, transferTofunc, contractToMap}) => {
  const [contractTo, setContractTo] = useState(0)
  var color = ''
  if (isEOA) {
    color = 'green'
  } else {
    color = 'blue'
  }
  return (
    <Card color={color}>
      <Card.Content>
        <Image
          floated='right'
          size='small'
          src={imgsrc}
        />
        {isEOA 
        ?
        <Card.Header>Address: {to}</Card.Header>
        :
        <Card.Header>Contract Address: {to}</Card.Header>
        }
        <Card.Meta>Index: {index}</Card.Meta>
        <Card.Description>
          Balance: {balance}
        </Card.Description>
      </Card.Content>
      <Card.Content extra>
        <div>
        <Button color='green' onClick={()=>{sendfunc(from, to, 5)}}>
            Send 5 ETH
        </Button>
        <Button color='yellow' onClick={()=>{sendfunc(from, to, 10)}}>
            Send 10 ETH
        </Button>
        <Button color='orange' onClick={()=>{sendfunc(from, to, 30)}}>
            Send 30 ETH
        </Button>
        {transferTofunc
        ?
        <React.Fragment>
        <Button color='red' onClick={()=>{transferTofunc(from, contractToMap[contractTo], 3)}}>
            Transfer 3 ETH From This Contract To Index {contractTo}
        </Button>
        <Input label='Index' onChange={(e)=> {
          if (e.target.value != ''){
            const index = parseInt(e.target.value,10)
            if (index>=0 && index<=4){
              setContractTo(index)
            }
          }
        }}/>
        </React.Fragment>
        :
        <div></div>
        }
        </div>
      </Card.Content>
    </Card> 
  )   
}

export default AccountCard